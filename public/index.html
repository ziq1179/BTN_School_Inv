<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>School Inventory System</title>
  <meta name="description" content="Premium school inventory management system for uniforms and books." />
  <link rel="icon" type="image/png" href="/logo.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="topographic-pattern">

<!-- ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="sidebar-backdrop" id="sidebar-backdrop" aria-hidden="true"></div>
<aside class="sidebar" id="sidebar">
  <button class="sidebar-close btn btn-ghost" id="sidebar-close" aria-label="Close menu">‚úï</button>
  <div class="sidebar-logo">
    <img src="/logo.png" alt="BY THE NUMB3RS" class="logo-icon-img" />
    <div>
      <div class="logo-title">BY THE NUMB<span class="numb3rs">3</span>RS</div>
      <div class="logo-sub">School Inventory</div>
    </div>
  </div>

  <nav class="sidebar-nav">
    <a href="#" class="nav-item active" data-page="dashboard" id="nav-dashboard">
      <span class="nav-icon">üìä</span>
      <span>Dashboard</span>
    </a>
    <a href="#" class="nav-item" data-page="items" id="nav-items">
      <span class="nav-icon">üì¶</span>
      <span>Inventory</span>
    </a>
    <a href="#" class="nav-item" data-page="categories" id="nav-categories">
      <span class="nav-icon">üóÇÔ∏è</span>
      <span>Categories</span>
    </a>
    <a href="#" class="nav-item" data-page="transactions" id="nav-transactions">
      <span class="nav-icon">üìã</span>
      <span>Transactions</span>
    </a>
    <a href="#" class="nav-item" data-page="users" id="nav-users" style="display:none">
      <span class="nav-icon">üë•</span>
      <span>Users</span>
    </a>
    <a href="#" class="nav-item" data-page="settings" id="nav-settings" style="display:none">
      <span class="nav-icon">‚öôÔ∏è</span>
      <span>Settings</span>
    </a>
  </nav>

  <div class="sidebar-logo-center">
    <img src="/logo.png" alt="BY THE NUMB3RS" class="sidebar-logo-img" />
  </div>

  <div class="sidebar-footer">
    <div class="server-status" id="server-status">
      <span class="status-dot"></span>
      <span>Server Connected</span>
    </div>
  </div>
</aside>

<!-- ‚îÄ‚îÄ Main Content ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<main class="main-content">

  <!-- Top Bar -->
  <header class="topbar">
    <div class="topbar-left">
      <button class="btn btn-ghost btn-menu" id="btn-menu" aria-label="Menu">
        <span class="menu-icon">‚ò∞</span>
      </button>
      <h1 class="page-title" id="page-title">Dashboard</h1>
    </div>
    <div class="topbar-right">
      <div class="live-clock" id="live-clock"></div>
      <div class="user-menu" id="user-menu">
        <span class="user-name" id="user-name">‚Äî</span>
        <span class="user-role" id="user-role"></span>
        <button class="btn btn-ghost btn-sm" id="btn-logout">Logout</button>
      </div>
      <button class="btn btn-primary" id="btn-add-item" onclick="openModal('modal-add-item')">
        + Add Item
      </button>
    </div>
  </header>

  <!-- ‚îÄ‚îÄ DASHBOARD PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <section class="page active" id="page-dashboard">
    <!-- Stats Cards -->
    <div class="stats-grid" id="stats-grid">
      <div class="stat-card stat-blue">
        <div class="stat-icon">üì¶</div>
        <div class="stat-info">
          <div class="stat-value" id="stat-items">‚Äî</div>
          <div class="stat-label">Product Types</div>
        </div>
      </div>
      <div class="stat-card stat-purple">
        <div class="stat-icon">üî¢</div>
        <div class="stat-info">
          <div class="stat-value" id="stat-units">‚Äî</div>
          <div class="stat-label">Units in Stock</div>
        </div>
      </div>
      <div class="stat-card stat-purple">
        <div class="stat-icon">üóÇÔ∏è</div>
        <div class="stat-info">
          <div class="stat-value" id="stat-categories">‚Äî</div>
          <div class="stat-label">Categories</div>
        </div>
      </div>
      <div class="stat-card stat-orange staff-hidden" id="stat-card-cost">
        <div class="stat-icon">üí∞</div>
        <div class="stat-info">
          <div class="stat-value" id="stat-cost-value">‚Äî</div>
          <div class="stat-label">Stock Cost Value</div>
        </div>
      </div>
      <div class="stat-card stat-green">
        <div class="stat-icon">üìà</div>
        <div class="stat-info">
          <div class="stat-value" id="stat-retail-value">‚Äî</div>
          <div class="stat-label">Retail Value</div>
        </div>
      </div>
      <div class="stat-card stat-teal staff-hidden" id="stat-card-profit">
        <div class="stat-icon">‚ú®</div>
        <div class="stat-info">
          <div class="stat-value" id="stat-profit">‚Äî</div>
          <div class="stat-label">Potential Profit</div>
        </div>
      </div>
    </div>

    <div class="dashboard-grid">
      <!-- Low Stock Alerts -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">üö® Low Stock Alerts</h2>
        </div>
        <div class="card-body" id="low-stock-list">
          <div class="empty-state">Loading...</div>
        </div>
      </div>

      <!-- Recent Sales -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">üõí Recent Sales</h2>
        </div>
        <div class="card-body" id="recent-sales-list">
          <div class="empty-state">Loading...</div>
        </div>
      </div>
    </div>

    <!-- Item-wise Sales & Profit Charts -->
    <div class="charts-row">
      <div class="card chart-card">
        <div class="card-header">
          <h2 class="card-title">Item-wise Sales (Revenue)</h2>
        </div>
        <div class="card-body chart-body">
          <canvas id="chart-sales" height="280"></canvas>
          <div class="chart-empty" id="chart-sales-empty">No sales data yet.</div>
        </div>
      </div>
      <div class="card chart-card staff-hidden" id="chart-card-profit">
        <div class="card-header">
          <h2 class="card-title">Item-wise Profit</h2>
        </div>
        <div class="card-body chart-body">
          <canvas id="chart-profit" height="280"></canvas>
          <div class="chart-empty" id="chart-profit-empty">No profit data yet.</div>
        </div>
      </div>
    </div>

    <!-- Category-wise Sales (Pie Chart) -->
    <div class="chart-single">
      <div class="card chart-card">
        <div class="card-header">
          <h2 class="card-title">Category-wise Sales (Revenue)</h2>
        </div>
        <div class="card-body chart-body chart-body-pie">
          <canvas id="chart-category" height="300"></canvas>
          <div class="chart-empty" id="chart-category-empty">No sales data yet.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚îÄ‚îÄ INVENTORY PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <section class="page" id="page-items">
    <!-- Search & Filters -->
    <div class="toolbar">
      <div class="search-wrap">
        <span class="search-icon">üîç</span>
        <input type="text" class="search-input" id="item-search" placeholder="Search by name or SKU..." />
      </div>
      <select class="filter-select" id="filter-category">
        <option value="">All Categories</option>
      </select>
      <label class="checkbox-label">
        <input type="checkbox" id="filter-low-stock" />
        Low Stock Only
      </label>
    </div>

    <!-- Items Table -->
    <div class="card">
      <div class="card-body no-pad">
        <div class="table-wrap">
        <table class="data-table" id="items-table">
          <thead>
            <tr>
              <th></th>
              <th>SKU</th>
              <th>Item Name</th>
              <th>Category</th>
              <th>Size / Class</th>
              <th class="staff-hidden" id="th-cost">Cost (PKR)</th>
              <th>Sale (PKR)</th>
              <th>Stock</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="items-tbody">
            <tr><td colspan="9" class="loading-row">Loading inventory...</td></tr>
          </tbody>
        </table>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚îÄ‚îÄ CATEGORIES PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <section class="page" id="page-categories">
    <div class="toolbar">
      <button class="btn btn-primary" id="btn-add-category" onclick="openModal('modal-add-category')">+ Add Category</button>
    </div>
    <div class="categories-grid" id="categories-grid">
      <div class="loading-state">Loading categories...</div>
    </div>
  </section>

  <!-- ‚îÄ‚îÄ TRANSACTIONS PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <section class="page" id="page-transactions">
    <div class="toolbar">
      <select class="filter-select" id="filter-tx-type">
        <option value="">All Types</option>
        <option value="SALE">Sales</option>
        <option value="STOCK_IN">Stock In</option>
        <option value="INITIAL_BALANCE">Initial Balance</option>
      </select>
    </div>
    <div class="card">
      <div class="card-body no-pad">
        <div class="table-wrap">
        <table class="data-table">
          <thead>
            <tr>
              <th>Date & Time</th>
              <th>Item (SKU)</th>
              <th>Type</th>
              <th>Quantity</th>
              <th>Price (PKR)</th>
              <th>Reference</th>
            </tr>
          </thead>
          <tbody id="tx-tbody">
            <tr><td colspan="6" class="loading-row">Loading transactions...</td></tr>
          </tbody>
        </table>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚îÄ‚îÄ USERS PAGE (Admin only) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <section class="page" id="page-users">
    <div class="toolbar">
      <button class="btn btn-primary" onclick="openModal('modal-add-user')" id="btn-add-user">+ Add User</button>
    </div>
    <div class="card">
      <div class="card-body no-pad">
        <div class="table-wrap">
        <table class="data-table">
          <thead>
            <tr>
              <th>Email</th>
              <th>Name</th>
              <th>Role</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="users-tbody">
            <tr><td colspan="5" class="loading-row">Loading users...</td></tr>
          </tbody>
        </table>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚îÄ‚îÄ SETTINGS PAGE (Admin only) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <section class="page" id="page-settings">
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">School branding</h2>
      </div>
      <div class="card-body">
        <p class="settings-intro">Set your school name and logo. They appear in the sidebar and on the login page.</p>
        <form id="form-settings">
          <div class="form-group">
            <label>School name</label>
            <input type="text" name="schoolName" id="settings-school-name" placeholder="e.g. St. Mary's School" required />
          </div>
          <div class="form-group">
            <label>Logo</label>
            <div class="settings-logo-row">
              <div class="settings-logo-preview">
                <img id="settings-logo-preview" src="/logo.png" alt="Logo" />
              </div>
              <div>
                <input type="file" id="settings-logo-file" accept="image/png,image/jpeg,image/jpg,image/gif,image/webp" />
                <p class="form-hint">PNG, JPEG, GIF or WebP. Max 2MB.</p>
              </div>
            </div>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary" id="btn-save-settings">Save</button>
          </div>
        </form>
      </div>
    </div>
  </section>

</main>

<!-- ‚îÄ‚îÄ MODALS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

<!-- Add Item Modal -->
<div class="modal-overlay" id="modal-add-item" onclick="closeModalOnOverlay(event, 'modal-add-item')">
  <div class="modal">
    <div class="modal-header">
      <h2>Add New Item</h2>
      <button class="modal-close" onclick="closeModal('modal-add-item')">‚úï</button>
    </div>
    <div class="modal-body">
      <form id="form-add-item">
        <div class="form-grid">
          <div class="form-group">
            <label>Item Name *</label>
            <input type="text" name="name" required placeholder="e.g. Boys Shirt Size 32" />
          </div>
          <div class="form-group">
            <label>Category *</label>
            <select name="categoryId" required id="add-item-category-select">
              <option value="">Select category...</option>
            </select>
          </div>
          <div class="form-group">
            <label>SKU Code (auto-generated if blank)</label>
            <input type="text" name="sku" placeholder="e.g. BUN-SH-32" />
          </div>
          <div class="form-group">
            <label>Size</label>
            <input type="text" name="size" placeholder="e.g. 32, M, L" />
          </div>
          <div class="form-group">
            <label>Class</label>
            <input type="text" name="itemClass" placeholder="e.g. Class 5" />
          </div>
          <div class="form-group">
            <label>Subject</label>
            <input type="text" name="subject" placeholder="e.g. Mathematics" />
          </div>
          <div class="form-group">
            <label>Cost Price (PKR) *</label>
            <input type="number" name="costPrice" required min="0" step="1" placeholder="0" />
          </div>
          <div class="form-group">
            <label>Sale Price (PKR) *</label>
            <input type="number" name="salePrice" required min="0" step="1" placeholder="0" />
          </div>
          <div class="form-group">
            <label>Initial Stock</label>
            <input type="number" name="stock" min="0" step="1" placeholder="0" />
          </div>
          <div class="form-group full-width">
            <label>Description</label>
            <textarea name="description" placeholder="Optional notes..."></textarea>
          </div>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-ghost" onclick="closeModal('modal-add-item')">Cancel</button>
          <button type="submit" class="btn btn-primary">Add Item</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Add Category Modal -->
<div class="modal-overlay" id="modal-add-category" onclick="closeModalOnOverlay(event, 'modal-add-category')">
  <div class="modal modal-sm">
    <div class="modal-header">
      <h2>Add Category</h2>
      <button class="modal-close" onclick="closeModal('modal-add-category')">‚úï</button>
    </div>
    <div class="modal-body">
      <form id="form-add-category">
        <div class="form-group">
          <label>Category Name *</label>
          <input type="text" name="name" required placeholder="e.g. Boys' Uniform" />
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea name="description" placeholder="Optional..."></textarea>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-ghost" onclick="closeModal('modal-add-category')">Cancel</button>
          <button type="submit" class="btn btn-primary">Create Category</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Stock In Modal -->
<div class="modal-overlay" id="modal-stock-in" onclick="closeModalOnOverlay(event, 'modal-stock-in')">
  <div class="modal modal-sm">
    <div class="modal-header">
      <h2>üì• Add Stock</h2>
      <button class="modal-close" onclick="closeModal('modal-stock-in')">‚úï</button>
    </div>
    <div class="modal-body">
      <div class="item-info-banner" id="stock-in-item-banner"></div>
      <form id="form-stock-in">
        <input type="hidden" name="itemId" id="stock-in-item-id" />
        <div class="form-group">
          <label>Quantity to Add *</label>
          <input type="number" name="quantity" required min="1" step="1" placeholder="e.g. 50" id="stock-in-qty" />
        </div>
        <div class="form-group">
          <label>Purchase Price per Unit (PKR)</label>
          <input type="number" name="price" min="0" step="1" placeholder="Optional" />
        </div>
        <div class="form-group">
          <label>Reference / Invoice No.</label>
          <input type="text" name="reference" placeholder="e.g. INV-2024-001" />
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-ghost" onclick="closeModal('modal-stock-in')">Cancel</button>
          <button type="submit" class="btn btn-success">Add Stock</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Sale Modal -->
<div class="modal-overlay" id="modal-sale" onclick="closeModalOnOverlay(event, 'modal-sale')">
  <div class="modal modal-sm">
    <div class="modal-header">
      <h2>üõí Record Sale</h2>
      <button class="modal-close" onclick="closeModal('modal-sale')">‚úï</button>
    </div>
    <div class="modal-body" id="sale-modal-body">
      <div id="sale-form-wrap">
      <div class="item-info-banner" id="sale-item-banner"></div>
      <form id="form-sale">
        <input type="hidden" name="itemId" id="sale-item-id" />
        <div class="form-group">
          <label>Quantity Sold *</label>
          <input type="number" name="quantity" required min="1" step="1" placeholder="e.g. 2" id="sale-qty" />
        </div>
        <div class="form-group">
          <label>Sale Price per Unit (PKR)</label>
          <input type="number" name="price" min="0" step="1" placeholder="Defaults to item sale price" id="sale-price" />
        </div>
        <div class="form-group">
          <label>Reference / Receipt No.</label>
          <input type="text" name="reference" placeholder="e.g. RCPT-001" />
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-ghost" onclick="closeModal('modal-sale')">Cancel</button>
          <button type="submit" class="btn btn-danger">Record Sale</button>
        </div>
      </form>
      </div>
      <div id="sale-receipt-wrap" class="hidden">
        <div class="receipt-print" id="receipt-content"></div>
        <div class="form-actions" style="margin-top: 20px;">
          <button type="button" class="btn btn-primary" onclick="printReceipt()">üñ®Ô∏è Print Receipt</button>
          <button type="button" class="btn btn-ghost" onclick="closeModal('modal-sale')">Done</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Item Profile Modal -->
<div class="modal-overlay" id="modal-item-profile" onclick="closeModalOnOverlay(event, 'modal-item-profile')">
  <div class="modal modal-profile">
    <div class="modal-header">
      <h2>Item Profile</h2>
      <button class="modal-close" onclick="closeModal('modal-item-profile')">‚úï</button>
    </div>
    <div class="modal-body" id="item-profile-body">
      <div class="profile-loading">Loading...</div>
    </div>
  </div>
</div>

<!-- Add User Modal (Admin only) -->
<div class="modal-overlay" id="modal-add-user" onclick="closeModalOnOverlay(event, 'modal-add-user')">
  <div class="modal modal-sm">
    <div class="modal-header">
      <h2>Add User</h2>
      <button class="modal-close" onclick="closeModal('modal-add-user')">‚úï</button>
    </div>
    <div class="modal-body">
      <form id="form-add-user">
        <div class="form-group">
          <label>Email *</label>
          <input type="email" name="email" required placeholder="user@school.local" />
        </div>
        <div class="form-group">
          <label>Password *</label>
          <input type="password" name="password" required minlength="6" placeholder="Min 6 characters" />
        </div>
        <div class="form-group">
          <label>Name</label>
          <input type="text" name="name" placeholder="Optional" />
        </div>
        <div class="form-group">
          <label>Role *</label>
          <select name="role" required id="add-user-role">
            <option value="STAFF">Staff</option>
            <option value="MANAGER">Manager</option>
            <option value="ADMIN">Admin</option>
            <option value="VIEWER">Viewer</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-ghost" onclick="closeModal('modal-add-user')">Cancel</button>
          <button type="submit" class="btn btn-primary">Create User</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Edit User Modal (Admin only) -->
<div class="modal-overlay" id="modal-edit-user" onclick="closeModalOnOverlay(event, 'modal-edit-user')">
  <div class="modal modal-sm">
    <div class="modal-header">
      <h2>Edit User</h2>
      <button class="modal-close" onclick="closeModal('modal-edit-user')">‚úï</button>
    </div>
    <div class="modal-body">
      <form id="form-edit-user">
        <input type="hidden" name="userId" id="edit-user-id" />
        <div class="form-group">
          <label>Email</label>
          <input type="text" name="email" id="edit-user-email" disabled style="opacity:0.8;cursor:not-allowed" />
        </div>
        <div class="form-group">
          <label>Name</label>
          <input type="text" name="name" id="edit-user-name" placeholder="Optional" />
        </div>
        <div class="form-group">
          <label>Role</label>
          <select name="role" id="edit-user-role">
            <option value="VIEWER">Viewer</option>
            <option value="STAFF">Staff</option>
            <option value="MANAGER">Manager</option>
            <option value="ADMIN">Admin</option>
          </select>
        </div>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" name="isActive" id="edit-user-active" checked />
            Active
          </label>
        </div>
        <div class="form-group">
          <label>New Password</label>
          <input type="password" name="password" id="edit-user-password" minlength="6" placeholder="Leave blank to keep current" autocomplete="new-password" />
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-ghost" onclick="closeModal('modal-edit-user')">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Toast Notification -->
<div class="toast-container" id="toast-container"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
<script src="app.js"></script>
</body>
</html>
